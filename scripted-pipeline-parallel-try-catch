stage('Download GIT REPO') {
    node ('PROD') {
        try {
            sh 'date'
            git branch: 'main', url:'https://github.com/santhoshpog/Listpython.git'
        }
        catch(exc) {
            echo 'Failed to clone repo'
        }
    }
}

stage('Running other programs') {
    node ('PROD') {
    parallel Builder: {
        try {
            sh 'date'
            sh 'python evenodd.py'
            sh 'sleep 30'
        }
        catch(exc) {
            echo 'Failed to run evenodd'
        }
    },
    Tester: {
      try {
          sh 'date'
          sh 'python mydict.py'
          sh 'sleep 20'
      }  
      catch(exc) {
          echo 'Failed to run mydict'
      }
    },
    Deployer: {
        try {
            sh 'date'
            sh 'python deploy.py'
            sh 'sleep 10'
        }
        catch(exc) {
            echo 'Failed to run deploy'
        }
    }
}
}
stage('Final Checker') {
    node('PROD') {
        try {
            sh 'date'
            sh 'ansible-playbook new.yml '
            sh 'date'
        }
        catch(exp) {
            sh 'date'
            echo 'new.yml failed'
            sh 'date'
        }
    }
}
